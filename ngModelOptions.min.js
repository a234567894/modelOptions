angular.module("modelOptions",[]).directive("ngModelOptions",function(){return{priority:1,restrict:"A",require:["ngModel"],link:function(a,b,c,d){function e(){var e;switch(i){case"inputradio":e=c.ngValue?a.$eval(c.ngValue):b.val();break;case"inputcheckbox":e=b.prop("checked");break;case"select":e=f();break;default:e=b.val()}c.ngTrim&&"false"===c.ngTrim.toLowerCase()||(e=e.replace(/^\s+|\s+$/g,"")),a.$apply(function(){d[0].$setViewValue(e)})}function f(){if(!c.ngOptions)throw"Must have ng-options";var d,e=c.ngOptions.match(h),f=e[8],g=e[7],i=a.$eval(g),j=b.val();return f?angular.forEach(i,function(a,b){a[f.replace(/^.*?\./,"")]==j&&(d=b)}):d=j,/.*\..*/.test(e[1])?(console.log(e[1].replace(/^.*?\./,g+"["+d+"].")),a.$eval(e[1].replace(/^.*?\./,g+"["+d+"]."))):i[d]}var g,h=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,i=b[0].nodeName.toLowerCase()+(c.type||""),j=[],k={},l={debounce:0,updateOn:"default"},m=angular.extend(l,a.$eval(c.ngModelOptions)),n="object"==typeof m.debounce,o=m.updateOn.split(" ");j="inputtext"===i||"textarea"===i?["keydown","input","change"]:"inputradio"===i||"inputcheckbox"===i?["click"]:"select"===i?["change"]:["keydown","input","change"],c.ngOptions&&console.log(c.ngOptions.match(h)),angular.forEach(j,function(a){try{b.off(a)}catch(c){}}),angular.forEach(o,function(a){k[a]=n?m.debounce[a]:m.debounce}),m.updateOn.match(/default/i)&&b.on(j.join(" "),function(){var a=m.debounce["default"]||m.debounce||0;clearTimeout(g),g=setTimeout(function(){e()},a)}),angular.forEach(o,function(a){if("default"!==a){var c=k[a];"undefined"==typeof c&&(c=m.debounce["default"]||0),b.on(a,function(){clearTimeout(g),g=setTimeout(function(){e()},c)})}})}}});